#!/bin/bash
# Generate initial test samples for Jarvis Triage

set -e

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
SAMPLES_DIR="$(dirname "$SCRIPT_DIR")/samples"

mkdir -p "$SAMPLES_DIR"

echo "Generating test samples..."

# Level 0 - é™é»˜
cat > "$SAMPLES_DIR/level-0-backup-complete.md" << 'EOF'
# æµ‹è¯•: å¤‡ä»½å®Œæˆï¼ˆLevel 0ï¼‰

## å…ƒä¿¡æ¯
- **Level**: 0
- **ç±»åž‹**: system
- **å†³ç­–ç‚¹æ•°é‡**: 0
- **é£Žé™©ç­‰çº§**: none

## åŽŸå§‹è¾“å…¥
Cron job "daily-backup" completed successfully.
Backup file: /backups/daily/2026-02-12_03-00-00.sql.gz
Size: 2.3 GB
Duration: 45 seconds
Next run: 2026-02-13 03:00:00

## æœŸæœ›è¾“å‡º

### åˆ¤å®š
Level 0 - é™é»˜ï¼ˆçº¯æ‰§è¡Œç»“æžœï¼Œç”¨æˆ·ä¸éœ€è¦çŸ¥é“ï¼‰

### HUDç‰ˆ
æ— è¾“å‡º

### è¯­éŸ³ç‰ˆ
æ— è¾“å‡º

### å†³ç­–ç‚¹
æ— 

## æµ‹è¯•è¯´æ˜Ž
ç”¨æˆ·è®¾ç½®äº†è‡ªåŠ¨å¤‡ä»½ï¼Œæ‰§è¡ŒæˆåŠŸæ˜¯é¢„æœŸè¡Œä¸ºï¼Œä¸éœ€è¦é€šçŸ¥ã€‚
EOF

# Level 1 - é€šçŸ¥
cat > "$SAMPLES_DIR/level-1-email-sent.md" << 'EOF'
# æµ‹è¯•: é‚®ä»¶å‘é€æˆåŠŸï¼ˆLevel 1ï¼‰

## å…ƒä¿¡æ¯
- **Level**: 1
- **ç±»åž‹**: notification
- **å†³ç­–ç‚¹æ•°é‡**: 0
- **é£Žé™©ç­‰çº§**: none

## åŽŸå§‹è¾“å…¥
Email sent successfully.
To: zhangsan@example.com
Subject: ä¼šè®®ç¡®è®¤ - å‘¨å››ä¸‹åˆ3ç‚¹
Attachments: meeting-agenda.pdf
Message ID: <abc123@example.com>

## æœŸæœ›è¾“å‡º

### åˆ¤å®š
Level 1 - é€šçŸ¥ï¼ˆç”¨æˆ·åº”çŸ¥ä½†æ— éœ€æ“ä½œï¼‰

### è¯­éŸ³ç‰ˆ
é‚®ä»¶å·²ç»å‘ç»™å¼ ä¸‰äº†ã€‚

### HUDç‰ˆ
L1: âœ… é‚®ä»¶å·²å‘é€ â†’ å¼ ä¸‰

### å†³ç­–ç‚¹
æ— 

## æµ‹è¯•è¯´æ˜Ž
é‡è¦æ“ä½œçš„ç¡®è®¤ï¼Œä½†ä¸éœ€è¦ç”¨æˆ·åšå†³ç­–ã€‚
EOF

# Level 2 - å¿«é€Ÿå†³ç­–
cat > "$SAMPLES_DIR/level-2-meeting-time.md" << 'EOF'
# æµ‹è¯•: ä¼šè®®æ—¶é—´é€‰æ‹©ï¼ˆLevel 2ï¼‰

## å…ƒä¿¡æ¯
- **Level**: 2
- **ç±»åž‹**: decision
- **å†³ç­–ç‚¹æ•°é‡**: 1
- **é£Žé™©ç­‰çº§**: none

## åŽŸå§‹è¾“å…¥
éœ€è¦ç¡®å®šè¯¾ç¨‹ç›´æ’­æ—¶é—´ã€‚ç›®å‰æœ‰ä¸¤ä¸ªå¯é€‰æ—¶æ®µï¼š

1. å‘¨å››æ™š8ç‚¹
   - ä½ ç›®å‰æœ‰å¦ä¸€ä¸ªä¼šè®®ï¼ˆ7pm-7:30pmï¼‰ï¼Œä½†å¯ä»¥è°ƒå¼€
   - è§‚ä¼—å‚ä¸Žåº¦é€šå¸¸è¾ƒé«˜

2. å‘¨äº”æ™š8ç‚¹
   - ç›®å‰æ—¥åŽ†æ— å†²çª
   - å‘¨æœ«å‰è§‚ä¼—å¯èƒ½æ¯”è¾ƒç–²æƒ«

ä¸¤ä¸ªæ—¶æ®µçš„ä¼šè®®å®¤éƒ½å·²é¢„è®¢ï¼Œéšæ—¶å¯ä»¥ç¡®è®¤ã€‚
è¯·å›žå¤é€‰æ‹©å“ªä¸ªæ—¶æ®µã€‚

## æœŸæœ›è¾“å‡º

### åˆ¤å®š
Level 2 - å¿«é€Ÿå†³ç­–ï¼ˆç®€å•äºŒé€‰ä¸€ï¼‰

### è¯­éŸ³ç‰ˆ
è¯¾ç¨‹ç›´æ’­æ—¶é—´è¦å®šä¸€ä¸‹ï¼Œå‘¨å››å’Œå‘¨äº”æ™š8ç‚¹éƒ½è¡Œã€‚å‘¨äº”æ²¡å†²çªï¼Œå‘¨å››çš„è¯è¦è°ƒä¸€ä¸ªä¼šã€‚

### HUDç‰ˆ
L1: ðŸ“… è¯¾ç¨‹ç›´æ’­æ—¶é—´
L2:   A: å‘¨å›› 8pmï¼ˆéœ€è°ƒä¼šï¼‰
L3:   B: å‘¨äº” 8pmï¼ˆæ— å†²çªï¼‰

### å†³ç­–ç‚¹
- å†³ç­–1: é€‰å“ªå¤©ï¼Ÿ â†’ å‘¨å›› / å‘¨äº”

## æµ‹è¯•è¯´æ˜Ž
å…¸åž‹çš„äºŒé€‰ä¸€å†³ç­–ï¼Œéœ€è¦ç”¨æˆ·å¿«é€Ÿå†³å®šã€‚
EOF

# Level 3 - ä¿¡æ¯å†³ç­–
cat > "$SAMPLES_DIR/level-3-cloud-provider.md" << 'EOF'
# æµ‹è¯•: äº‘æœåŠ¡å•†é€‰æ‹©ï¼ˆLevel 3ï¼‰

## å…ƒä¿¡æ¯
- **Level**: 3
- **ç±»åž‹**: decision
- **å†³ç­–ç‚¹æ•°é‡**: 1
- **é£Žé™©ç­‰çº§**: low

## åŽŸå§‹è¾“å…¥
åˆ†æžäº†ä¸‰ä¸ªäº‘æœåŠ¡å•†çš„æŠ¥ä»·å’Œç‰¹æ€§ï¼š

**AWS**
- å¹´è´¹: ~$2400
- ä¼˜åŠ¿: æœåŠ¡æœ€å…¨ï¼Œç”Ÿæ€æˆç†Ÿï¼Œæ–‡æ¡£å®Œå–„
- åŠ£åŠ¿: å­¦ä¹ æ›²çº¿é™¡ï¼Œé…ç½®å¤æ‚
- é€‚åˆ: å¤§è§„æ¨¡ã€å¤æ‚æž¶æž„

**Vercel**
- å¹´è´¹: ~$1200
- ä¼˜åŠ¿: Next.jsåŽŸç”Ÿæ”¯æŒï¼Œéƒ¨ç½²æžç®€ï¼ŒCI/CDå†…ç½®
- åŠ£åŠ¿: Vendor lock-inä¸¥é‡ï¼Œå®šåˆ¶å—é™
- é€‚åˆ: å¿«é€Ÿä¸Šçº¿ï¼Œæ ‡å‡†Next.jsé¡¹ç›®

**Railway**
- å¹´è´¹: ~$800
- ä¼˜åŠ¿: æ€§ä»·æ¯”æœ€é«˜ï¼ŒPostgreSQLé›†æˆå¥½ï¼Œå¼€å‘è€…ä½“éªŒä½³
- åŠ£åŠ¿: ç¤¾åŒºè¾ƒå°ï¼Œä¼ä¸šçº§åŠŸèƒ½è¾ƒå°‘
- é€‚åˆ: ä¸­å°é¡¹ç›®ï¼Œé¢„ç®—æ•æ„Ÿ

ä½ çš„é¡¹ç›®æƒ…å†µ:
- æŠ€æœ¯æ ˆ: Next.js + PostgreSQL
- æµé‡: ä¸­ç­‰ï¼ˆæ—¥æ´»~1000ç”¨æˆ·ï¼‰
- å›¢é˜Ÿ: 2äººï¼ŒDevOpsç»éªŒæœ‰é™
- é¢„ç®—: å¸Œæœ›æŽ§åˆ¶åœ¨$1500/å¹´ä»¥å†…

å»ºè®®:
- Railwayæ€§ä»·æ¯”æœ€ä¼˜ï¼ŒæŠ€æœ¯æ ˆå®Œå…¨åŒ¹é…
- Vercelæœ€çœå¿ƒä½†è¶…é¢„ç®—ä¸”é”å®šé£Žé™©
- AWSèƒ½åŠ›è¿‡å‰©ï¼Œè¿ç»´æˆæœ¬é«˜

æŽ¨èRailwayï¼Œä½†éœ€è¦ä½ ç¡®è®¤æ˜¯å¦æŽ¥å—ç›¸å¯¹è¾ƒå°çš„ç¤¾åŒºã€‚

## æœŸæœ›è¾“å‡º

### åˆ¤å®š
Level 3 - ä¿¡æ¯å†³ç­–ï¼ˆéœ€è¦äº†è§£èƒŒæ™¯æ‰èƒ½åˆ¤æ–­ï¼‰

### è¯­éŸ³ç‰ˆ
ä¸‰ä¸ªäº‘æœåŠ¡å•†å¸®ä½ æ¯”äº†ã€‚AWSä¸¤åƒå››æœ€è´µä½†æœ€å…¨ï¼ŒVercelä¸€åƒäºŒéƒ¨ç½²æœ€çœäº‹ä½†é”å®šä¸¥é‡ï¼ŒRailwayå…«ç™¾æ€§ä»·æ¯”æœ€é«˜ä½†ç¤¾åŒºå°ã€‚ä½ çš„æŠ€æœ¯æ ˆç”¨å“ªä¸ªéƒ½è¡Œï¼Œä¸»è¦çœ‹ä½ æ›´åœ¨æ„çœé’±è¿˜æ˜¯çœå¿ƒã€‚

### HUDç‰ˆ
L1: â˜ï¸ äº‘æœåŠ¡å•†é€‰æ‹©
L2: A: AWS $2400/y æœ€å…¨
L3: B: Vercel $1200/y æœ€æ˜“
L4: C: Railway $800/y æ€§ä»·æ¯”

### å†³ç­–ç‚¹
- å†³ç­–1: é€‰å“ªä¸ªæœåŠ¡å•†ï¼Ÿ â†’ AWSï¼ˆæœ€å…¨ï¼‰/ Vercelï¼ˆæœ€æ˜“ï¼‰/ Railwayï¼ˆæœ€çœï¼‰

### åŽ‹ç¼©æ‘˜è¦
ä¸‰å®¶å¯¹æ¯”ï¼š
- AWS: $2400/å¹´ï¼ŒæœåŠ¡æœ€å…¨ï¼Œå­¦ä¹ æ›²çº¿é«˜
- Vercel: $1200/å¹´ï¼ŒNext.jsåŽŸç”Ÿæ”¯æŒï¼Œvendor lock-in
- Railway: $800/å¹´ï¼Œæ€§ä»·æ¯”å¥½ï¼Œç¤¾åŒºè¾ƒå°
é¡¹ç›®æŠ€æœ¯æ ˆï¼ˆNext.js + PostgreSQLï¼‰ä¸‰å®¶éƒ½æ”¯æŒï¼Œé¢„ç®—åå¥½Railwayã€‚

## æµ‹è¯•è¯´æ˜Ž
éœ€è¦ç†è§£èƒŒæ™¯ä¿¡æ¯æ‰èƒ½åšå†³ç­–ï¼Œä½†ä»æ˜¯å•ä¸€å†³ç­–ç‚¹ï¼Œä¸æ˜¯å¤šæ­¥éª¤è®¡åˆ’ã€‚
EOF

# Level 4 - Plan å®¡æ‰¹ (æ ¸å¿ƒåœºæ™¯)
cat > "$SAMPLES_DIR/level-4-auth-migration.md" << 'EOF'
# æµ‹è¯•: JWT è®¤è¯è¿ç§»ï¼ˆLevel 4 - Plan å®¡æ‰¹ï¼‰

## å…ƒä¿¡æ¯
- **Level**: 4
- **ç±»åž‹**: plan
- **å†³ç­–ç‚¹æ•°é‡**: 2
- **é£Žé™©ç­‰çº§**: high

## åŽŸå§‹è¾“å…¥
Plan: å°†ç”¨æˆ·è®¤è¯ä»Ž Session è¿ç§»åˆ° JWT

## åˆ†æž
å½“å‰ä½¿ç”¨ Express Session + Redis å­˜å‚¨ç”¨æˆ·çŠ¶æ€ï¼Œéœ€è¦è¿ç§»åˆ° JWT ä»¥æ”¯æŒï¼š
- ç§»åŠ¨ç«¯ API è®¤è¯
- å¾®æœåŠ¡é—´æ— çŠ¶æ€è®¤è¯
- ç¬¬ä¸‰æ–¹é›†æˆï¼ˆOAuth2ï¼‰

## å®žæ–½è®¡åˆ’

### Step 1: å®‰è£…ä¾èµ–
```bash
npm install jsonwebtoken bcryptjs
npm install -D @types/jsonwebtoken
```

### Step 2: åˆ›å»º JWT ä¸­é—´ä»¶ (middleware/auth.js)
**éœ€è¦å†³ç­–1: Token å­˜å‚¨æ–¹å¼**

é€‰é¡¹ A: HttpOnly Cookie
- ä¼˜ç‚¹: é˜² XSSï¼Œè‡ªåŠ¨éšè¯·æ±‚å‘é€
- ç¼ºç‚¹: CORS é…ç½®å¤æ‚ï¼Œç§»åŠ¨ç«¯éœ€è¦ withCredentials

é€‰é¡¹ B: LocalStorage
- ä¼˜ç‚¹: å®žçŽ°ç®€å•ï¼Œè·¨åŸŸå‹å¥½
- ç¼ºç‚¹: XSS é£Žé™©ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ åˆ°è¯·æ±‚å¤´

æŽ¨è Cookieï¼ˆå®‰å…¨æ€§ä¼˜å…ˆï¼‰ï¼Œä½†éœ€è¦ç¡®è®¤ã€‚

### Step 3: é‡å†™ç™»å½•æŽ¥å£ (routes/auth.js)
- ç”Ÿæˆ access token (15min) + refresh token (7d)

**éœ€è¦å†³ç­–2: Refresh Token ç­–ç•¥**

é€‰é¡¹ A: Token Rotation
- æ¯æ¬¡ä½¿ç”¨ refresh token éƒ½ç”Ÿæˆæ–°çš„ pair
- æ›´å®‰å…¨ï¼ˆè¢«ç›—åŽåªèƒ½ç”¨ä¸€æ¬¡ï¼‰
- å®žçŽ°å¤æ‚ï¼Œéœ€è¦å¤„ç†å¹¶å‘åˆ·æ–°

é€‰é¡¹ B: Silent Refresh
- Refresh token å›ºå®šï¼Œåªæ›´æ–° access token
- å®žçŽ°ç®€å•
- é£Žé™©: refresh token è¢«ç›—å¯é•¿æœŸæ»¥ç”¨

### Step 4: æ•°æ®è¿ç§»è„šæœ¬ (scripts/migrate-sessions.js)
âš ï¸ **é£Žé™©è­¦å‘Š**: æ­¤æ­¥éª¤ä¸å¯é€†
- å¤‡ä»½çŽ°æœ‰ Redis session æ•°æ®
- ä¸ºæ‰€æœ‰æ´»è·ƒç”¨æˆ·ç”Ÿæˆ JWT secret
- æ¸…ç†è¿‡æœŸ session
- **å¿…é¡»å…ˆå¤‡ä»½æ•°æ®åº“**

### Step 5: æ›´æ–°å‰ç«¯ Token å¤„ç†
- ç»Ÿä¸€å°è£… API è¯·æ±‚ï¼Œè‡ªåŠ¨å¤„ç† token refresh
- æ·»åŠ ç™»å‡ºæ—¶æ¸…é™¤ token é€»è¾‘

### Step 6: åºŸå¼ƒ Session ç›¸å…³ä»£ç 
- ç§»é™¤ express-session ä¸­é—´ä»¶
- æ¸…ç† Redis ä¸­çš„ session æ•°æ®
- æ›´æ–°çŽ¯å¢ƒå˜é‡

### Step 7: é›†æˆæµ‹è¯•
- ç™»å½•/ç™»å‡ºæµç¨‹
- Token è¿‡æœŸå¤„ç†
- å¹¶å‘è¯·æ±‚å¤„ç†
- ç§»åŠ¨ç«¯å…¼å®¹æ€§

## é¢„ä¼°å·¥ä½œé‡
- å¼€å‘: 2-3 å¤©
- æµ‹è¯•: 1 å¤©
- è¿ç§»æ‰§è¡Œ: 2 å°æ—¶ï¼ˆéœ€ç»´æŠ¤çª—å£ï¼‰

## å›žæ»šè®¡åˆ’
å¦‚å‡ºçŽ°é—®é¢˜ï¼Œå¯åœ¨ 30 åˆ†é’Ÿå†…å›žæ»šåˆ° Session æ–¹æ¡ˆï¼š
1. åˆ‡æ¢çŽ¯å¢ƒå˜é‡å¯ç”¨æ—§è®¤è¯
2. æ¢å¤ Redis session æ•°æ®ï¼ˆå·²å¤‡ä»½ï¼‰
3. é‡å¯æœåŠ¡

è¯·ç¡®è®¤ä»¥ä¸‹å†³ç­–åŽæ‰§è¡Œï¼š
1. Token å­˜å‚¨: Cookie / LocalStorage ?
2. Refresh ç­–ç•¥: Rotation / Silent ?

## æœŸæœ›è¾“å‡º

### åˆ¤å®š
Level 4 - Planå®¡æ‰¹ï¼ˆå¤šæ­¥éª¤å®žæ–½è®¡åˆ’ï¼Œæœ‰ä¾èµ–å…³ç³»ï¼‰

### è¯­éŸ³ç‰ˆ
è®¤è¯è¿ç§»è®¡åˆ’å‡ºæ¥äº†ï¼Œåˆ†7æ­¥ã€‚å®‰è£…ä¾èµ–ã€å»ºJWTä¸­é—´ä»¶ã€æ”¹ç™»å½•æŽ¥å£ã€è¿ç§»æ•°æ®ã€æ”¹å‰ç«¯ã€æ¸…ç†æ—§ä»£ç ã€å†™æµ‹è¯•ã€‚æœ‰ä¸¤ä¸ªéœ€è¦ä½ å†³å®šçš„ï¼Œä¸€ä¸ªæ˜¯tokenå­˜å“ªé‡Œï¼Œä¸€ä¸ªæ˜¯åˆ·æ–°ç­–ç•¥ã€‚å¦å¤–æ•°æ®è¿ç§»é‚£æ­¥ä¸å¯é€†ï¼Œæ‰§è¡Œå‰ä¼šå…ˆå¤‡ä»½ã€‚

### HUDç‰ˆï¼ˆç¬¬ä¸€ä¸ªå†³ç­–ï¼‰
L1: ðŸ”§ JWTè¿ç§» Plan (7æ­¥)
L2: â“ å†³ç­–1/2ï¼šTokenå­˜å‚¨æ–¹å¼
L3:   A: Cookieï¼ˆå®‰å…¨/CORSéº»çƒ¦ï¼‰
L4:   B: LocalStorageï¼ˆç®€å•/XSSé£Žé™©ï¼‰

### å†³ç­–ç‚¹
- å†³ç­–1: Tokenå­˜å‚¨æ–¹å¼ â†’ Cookieï¼ˆæ›´å®‰å…¨ä½†CORSå¤æ‚ï¼‰/ LocalStorageï¼ˆç®€å•ä½†æœ‰XSSé£Žé™©ï¼‰
- å†³ç­–2: Refreshç­–ç•¥ â†’ Rotationï¼ˆæ›´å®‰å…¨ï¼‰/ Silent Refreshï¼ˆæ›´ç®€å•ï¼‰

### é£Žé™©
- Step 4 æ•°æ®è¿ç§»ä¸å¯é€†ï¼Œéœ€å…ˆå¤‡ä»½æ•°æ®åº“

### åŽ‹ç¼©æ‘˜è¦
7æ­¥è®¡åˆ’ï¼š
1. å®‰è£… jsonwebtoken + bcryptjs
2. åˆ›å»º JWT ä¸­é—´ä»¶ [å†³ç­–1ï¼šTokenå­˜å‚¨æ–¹å¼]
3. é‡å†™ç™»å½•æŽ¥å£ [å†³ç­–2ï¼šRefreshç­–ç•¥]
4. æ•°æ®è¿ç§» [âš ï¸ ä¸å¯é€†ï¼Œéœ€å¤‡ä»½]
5. æ›´æ–°å‰ç«¯ Token å¤„ç†
6. åºŸå¼ƒ Session ä»£ç 
7. é›†æˆæµ‹è¯•

é¢„ä¼°3-4å¤©å·¥ä½œé‡ï¼Œéœ€ç»´æŠ¤çª—å£æ‰§è¡Œè¿ç§»ã€‚

## æµ‹è¯•è¯´æ˜Ž
è¿™æ˜¯ Jarvis Triage çš„æ ¸å¿ƒåœºæ™¯ã€‚éœ€è¦ï¼š
1. æ­£ç¡®è¯†åˆ«ä¸º Level 4
2. æå–æ‰€æœ‰å†³ç­–ç‚¹
3. è¯†åˆ«ç ´åæ€§æ“ä½œå¹¶æé†’
4. å°†7æ­¥è®¡åˆ’åŽ‹ç¼©ä¸ºå¯ç®¡ç†çš„å†³ç­–æµç¨‹
EOF

# Level 4 - æ•°æ®åº“è¿ç§»ï¼ˆæ›´å¤æ‚åœºæ™¯ï¼‰
cat > "$SAMPLES_DIR/level-4-database-migration.md" << 'EOF'
# æµ‹è¯•: æ•°æ®åº“è¡¨ç»“æž„é‡æž„ï¼ˆLevel 4 - Plan å®¡æ‰¹ï¼‰

## å…ƒä¿¡æ¯
- **Level**: 4
- **ç±»åž‹**: plan
- **å†³ç­–ç‚¹æ•°é‡**: 3
- **é£Žé™©ç­‰çº§**: high

## åŽŸå§‹è¾“å…¥
Plan: ç”¨æˆ·è¡¨æ‹†åˆ†ä¸Žè®¢å•ç³»ç»Ÿé‡æž„

## èƒŒæ™¯
å½“å‰ç”¨æˆ·è¡¨ ~500ä¸‡è¡Œï¼ŒåŒ…å«ä¸ªäººä¿¡æ¯ã€è®¤è¯ã€è®¢å•ç»Ÿè®¡ç­‰å¤šç±»æ•°æ®ï¼š
- æŸ¥è¯¢æ€§èƒ½ä¸‹é™ï¼ˆå•è¡¨è¿‡å¤§ï¼‰
- æ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ã€èº«ä»½è¯ï¼‰ä¸Žåº”ç”¨æ•°æ®æ··åœ¨ä¸€èµ·
- éš¾ä»¥åšè¯»å†™åˆ†ç¦»

## å®žæ–½è®¡åˆ’

### Step 1: æ–°è¡¨è®¾è®¡

**éœ€è¦å†³ç­–1: æ‹†åˆ†ç­–ç•¥**

é€‰é¡¹ A: åž‚ç›´æ‹†åˆ†ï¼ˆæŒ‰å­—æ®µï¼‰
- users: id, username, email, password_hashï¼ˆè®¤è¯ç›¸å…³ï¼‰
- user_profiles: user_id, name, phone, id_card, addressï¼ˆä¸ªäººä¿¡æ¯ï¼‰
- user_stats: user_id, total_orders, total_amountï¼ˆç»Ÿè®¡æ•°æ®ï¼‰
- ä¼˜ç‚¹: æ•æ„Ÿæ•°æ®éš”ç¦»ï¼ŒæŸ¥è¯¢ç²¾å‡†
- ç¼ºç‚¹: éœ€è¦ JOINï¼Œä»£ç æ”¹åŠ¨å¤§

é€‰é¡¹ B: æ°´å¹³æ‹†åˆ†ï¼ˆæŒ‰ç”¨æˆ·IDå“ˆå¸Œï¼‰
- users_0, users_1, users_2, users_3
- ä¼˜ç‚¹: å•è¡¨æ•°æ®é‡å‡å°‘ï¼Œæ°´å¹³æ‰©å±•å®¹æ˜“
- ç¼ºç‚¹: è·¨åˆ†ç‰‡æŸ¥è¯¢å¤æ‚ï¼Œéœ€æ”¹è·¯ç”±é€»è¾‘

é€‰é¡¹ C: æ··åˆæ–¹æ¡ˆ
- åž‚ç›´æ‹†åˆ† auth + profile
- ç»Ÿè®¡æ•°æ®ä¿ç•™åœ¨åŽŸè¡¨ï¼ˆåªè¯»ï¼‰
- ä¼˜ç‚¹: å¹³è¡¡æ–¹æ¡ˆï¼Œæ”¹åŠ¨é€‚ä¸­
- ç¼ºç‚¹: æ²¡æœ‰å½»åº•è§£å†³å•è¡¨é—®é¢˜

### Step 2: åŒå†™é˜¶æ®µï¼ˆ2å‘¨ï¼‰
âš ï¸ **é£Žé™©**: åŒå†™æœŸé—´æ€§èƒ½ä¸‹é™ 10-15%
- å†™æ“ä½œåŒæ—¶æ›´æ–°æ—§è¡¨å’Œæ–°è¡¨
- è¯»æ“ä½œä»ä»Žæ—§è¡¨è¯»å–
- æ¯å¤©æ ¡éªŒæ•°æ®ä¸€è‡´æ€§

### Step 3: æ•°æ®è¿ç§»

**éœ€è¦å†³ç­–2: è¿ç§»çª—å£ç­–ç•¥**

é€‰é¡¹ A: åœæœºè¿ç§»
- å‡Œæ™¨ 2:00-4:00 ç»´æŠ¤çª—å£
- é¢„ä¼°åœæœº 2 å°æ—¶
- ç®€å•å®‰å…¨ï¼Œä½†å½±å“ç”¨æˆ·ä½“éªŒ

é€‰é¡¹ B: åœ¨çº¿è¿ç§»ï¼ˆæŽ¨èï¼‰
- ä½¿ç”¨ pt-online-schema-change
- é›¶åœæœºï¼Œä½†å·¥å…·å¤æ‚åº¦é«˜
- éœ€è¦ DBA å…¨ç¨‹ç›‘æŽ§

### Step 4: ç´¢å¼•é‡å»º
- æ–°è¡¨éœ€è¦é‡æ–°è®¾è®¡ç´¢å¼•ç­–ç•¥
- é¢„ä¼°é‡å»ºæ—¶é—´: 4-6 å°æ—¶

**éœ€è¦å†³ç­–3: ç´¢å¼•ç­–ç•¥**

é€‰é¡¹ A: å®Œå…¨å¤åˆ¶çŽ°æœ‰ç´¢å¼•
- å®‰å…¨ä¿å®ˆ
- å¯èƒ½ä¿ç•™æ— æ•ˆç´¢å¼•

é€‰é¡¹ B: é‡æ–°è®¾è®¡ç´¢å¼•ï¼ˆæŽ¨èï¼‰
- åŸºäºŽæ…¢æŸ¥è¯¢æ—¥å¿—ä¼˜åŒ–
- åˆ é™¤å†—ä½™ç´¢å¼•ï¼Œæ·»åŠ å¤åˆç´¢å¼•
- éœ€è¦åŽ‹æµ‹éªŒè¯

### Step 5: åº”ç”¨åˆ‡æ¢
- è¯»æ“ä½œåˆ‡æ¢åˆ°æ–°è¡¨
- ç›‘æŽ§é”™è¯¯çŽ‡å’Œå“åº”æ—¶é—´
- ä¿ç•™æ—§è¡¨ 30 å¤©ï¼ˆå¯å›žæ»šï¼‰

### Step 6: æ—§è¡¨æ¸…ç†
âš ï¸ **é£Žé™©**: æ¸…ç†åŽæ— æ³•å›žæ»š
- ç¡®è®¤ä¸šåŠ¡æ­£å¸¸ 30 å¤©åŽæ‰§è¡Œ
- å…ˆ rename å† dropï¼ˆä¿é™©ç­–ç•¥ï¼‰

## é£Žé™©çŸ©é˜µ

| é£Žé™© | æ¦‚çŽ‡ | å½±å“ | ç¼“è§£æŽªæ–½ |
|------|------|------|----------|
| æ•°æ®ä¸ä¸€è‡´ | ä¸­ | é«˜ | åŒå†™æ ¡éªŒ + ä¸€è‡´æ€§æ£€æŸ¥ |
| è¿ç§»å¤±è´¥ | ä½Ž | æžé«˜ | å®Œæ•´å¤‡ä»½ + å›žæ»šè„šæœ¬ |
| æ€§èƒ½ä¸‹é™ | é«˜ | ä¸­ | ç°åº¦åˆ‡æ¢ + ç›‘æŽ§ |
| ä¸šåŠ¡ä¸­æ–­ | ä½Ž | æžé«˜ | ç»´æŠ¤çª—å£/åœ¨çº¿å·¥å…· |

## å·¥ä½œé‡è¯„ä¼°
- æ–¹æ¡ˆè®¾è®¡: 2 å¤©
- ä»£ç æ”¹é€ : 5 å¤©
- åŒå†™é˜¶æ®µ: 14 å¤©ï¼ˆå¹¶è¡Œï¼‰
- æ•°æ®è¿ç§»: 1 å¤©
- éªŒè¯æµ‹è¯•: 3 å¤©
- **æ€»è®¡: çº¦ 4 å‘¨**

## å›žæ»šæ–¹æ¡ˆ
æ¯ä¸ªé˜¶æ®µéƒ½æœ‰å¯¹åº”çš„å›žæ»šç­–ç•¥ï¼š
- Step 1-2: ç›´æŽ¥åºŸå¼ƒæ–°è¡¨ï¼Œæ— å½±å“
- Step 3-4: åˆ‡å›žæ—§è¡¨è¯»ï¼ŒåŒæ­¥ä¿®å¤æ•°æ®
- Step 5 åŽ: æ— æ³•å›žæ»šï¼Œéœ€æ•°æ®ä¿®å¤è„šæœ¬

è¯·ç¡®è®¤ï¼š
1. æ‹†åˆ†ç­–ç•¥: åž‚ç›´ / æ°´å¹³ / æ··åˆ ?
2. è¿ç§»çª—å£: åœæœº / åœ¨çº¿ ?
3. ç´¢å¼•ç­–ç•¥: å¤åˆ¶çŽ°æœ‰ / é‡æ–°è®¾è®¡ ?

## æœŸæœ›è¾“å‡º

### åˆ¤å®š
Level 4 - Planå®¡æ‰¹ï¼ˆå¤æ‚æ•°æ®åº“è¿ç§»ï¼Œå¤šå†³ç­–ç‚¹ï¼Œé«˜é£Žé™©ï¼‰

### è¯­éŸ³ç‰ˆ
ç”¨æˆ·è¡¨é‡æž„è®¡åˆ’ï¼Œ500ä¸‡è¡Œæ•°æ®è¦æ‹†åˆ†ã€‚æœ‰3ä¸ªå†³ç­–ï¼šæ€Žä¹ˆæ‹†åˆ†ã€è¿ç§»çª—å£é€‰åœæœºè¿˜æ˜¯åœ¨çº¿ã€ç´¢å¼•è¦ä¸è¦é‡æ–°è®¾è®¡ã€‚åŒå†™æœŸé—´æ€§èƒ½ä¼šé™10%ï¼Œæ•°æ®è¿ç§»æœ‰é£Žé™©ï¼Œä½†å‡†å¤‡äº†å®Œæ•´å›žæ»šæ–¹æ¡ˆã€‚æ€»å…±è¦4å‘¨ã€‚

### HUDç‰ˆ
L1: ðŸ—„ï¸ ç”¨æˆ·è¡¨é‡æž„ Plan (6æ­¥)
L2: â“ å†³ç­–1/3ï¼šæ‹†åˆ†ç­–ç•¥
L3:   A: åž‚ç›´ï¼ˆå­—æ®µåˆ†ç¦»ï¼‰
L4:   B: æ°´å¹³ï¼ˆå“ˆå¸Œåˆ†ç‰‡ï¼‰/ C: æ··åˆ

### å†³ç­–ç‚¹
- å†³ç­–1: æ‹†åˆ†ç­–ç•¥ â†’ åž‚ç›´ï¼ˆå­—æ®µåˆ†ç¦»ï¼‰/ æ°´å¹³ï¼ˆå“ˆå¸Œï¼‰/ æ··åˆ
- å†³ç­–2: è¿ç§»çª—å£ â†’ åœæœºï¼ˆç®€å•ï¼‰/ åœ¨çº¿ï¼ˆé›¶åœæœºï¼‰
- å†³ç­–3: ç´¢å¼•ç­–ç•¥ â†’ å¤åˆ¶çŽ°æœ‰ / é‡æ–°è®¾è®¡

### é£Žé™©
- åŒå†™æœŸé—´æ€§èƒ½ä¸‹é™ 10-15%
- Step 3 æ•°æ®è¿ç§»å¤±è´¥é£Žé™©
- Step 6 æ—§è¡¨æ¸…ç†åŽæ— æ³•å›žæ»š

### åŽ‹ç¼©æ‘˜è¦
6æ­¥é‡æž„è®¡åˆ’ï¼Œ500ä¸‡è¡Œç”¨æˆ·è¡¨æ‹†åˆ†ï¼š
1. æ–°è¡¨è®¾è®¡ [å†³ç­–1ï¼šæ‹†åˆ†ç­–ç•¥]
2. åŒå†™é˜¶æ®µï¼ˆ2å‘¨ï¼‰âš ï¸æ€§èƒ½é™10-15%
3. æ•°æ®è¿ç§» [å†³ç­–2ï¼šè¿ç§»çª—å£]
4. ç´¢å¼•é‡å»º [å†³ç­–3ï¼šç´¢å¼•ç­–ç•¥]
5. åº”ç”¨åˆ‡æ¢
6. æ—§è¡¨æ¸…ç† âš ï¸æ— æ³•å›žæ»š

é¢„ä¼°4å‘¨ï¼Œéœ€ç»´æŠ¤çª—å£æˆ–åœ¨çº¿å·¥å…·ã€‚

## æµ‹è¯•è¯´æ˜Ž
å¤æ‚æ•°æ®åº“è¿ç§»åœºæ™¯ï¼Œæµ‹è¯• triage èƒ½å¦ï¼š
1. è¯†åˆ«å¤šä¸ªå†³ç­–ç‚¹ï¼ˆ3ä¸ªï¼‰
2. æå–æ‰€æœ‰é£Žé™©ï¼ˆ4ä¸ªï¼‰
3. åŽ‹ç¼©å¤æ‚çš„æŠ€æœ¯ç»†èŠ‚ä¸ºå¯ç®¡ç†çš„å†³ç­–æµç¨‹
4. ä¿æŒå…³é”®ä¿¡æ¯ï¼ˆæ•°æ®é‡ã€æ—¶é—´ä¼°ç®—ã€å›žæ»šç­–ç•¥ï¼‰
EOF

echo "âœ… Generated 5 test samples:"
ls -la "$SAMPLES_DIR/"
